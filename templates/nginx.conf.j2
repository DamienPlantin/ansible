server {
  listen 80;
  listen [::]:80;
  server_name {{ domain }};
  location ^~ /.well-known/acme-challenge/ {
  root /var/www/html/;
}

location / {
    if ($scheme != "https") {
        return 301 https://{{ domain }}$request_uri;
    }
  
}

server {
  listen 443 ssl http2;
  listen [::]:443 ssl http2;
  server_name {{ domain }};
  
  location ^~ /.well-known/acme-challenge {
  root /var/www/html/
}

  ssl_certificate     {{ ssl_crt }};
  ssl_certificate_key {{ ssl_key_a }}; 

  location / {
    try_files $uri $uri/ =404;
  }
}